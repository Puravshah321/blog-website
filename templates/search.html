{% load static %}

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link
    href="https://fonts.googleapis.com/css?family=Roboto:100,100i,300,300i,400,400i,500,500i,700,700i,900,900i&display=swap"
    rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0-alpha3/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-KK94CHFLLe+nY2dmCWGMq91rCGa5gtU4mk92HdvYe+M/SXH301p5ILy+dN9+nJOZ" crossorigin="anonymous">

  <!-- Bootstrap core CSS -->
  <link href="{% static 'vendor/bootstrap/css/bootstrap.min.css' %}" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-4bw+/aepP/YC94hEpVNVgiZdgIC5+VKNBQNGCHeKRQN+PtmoHDEXuppvnDJzQIu9" crossorigin="anonymous">

  <!-- Additional CSS Files -->
  <link rel="stylesheet" href="{% static 'assets/css/fontawesome.css' %}">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">
  <link rel="stylesheet" href="{% static 'assets/css/templatemo-stand-blog.css' %}">
  <link rel="stylesheet" href="{% static 'assets/css/owl.css' %}">
  <link rel="stylesheet" href="{% static 'assets/css/styles.css' %}">

  <title>Contact</title>

  <style>
    /* Add custom styling for the search form */
.form-select, .form-control {
    border-radius: 25px;
    padding: 10px;
}

/* Style for search button */
.btn-outline-success {
    border-radius: 25px;
    padding: 10px 20px;
    font-weight: bold;
}

/* Add a little margin and padding for the results */
.container.mt-4 {
    margin-top: 20px;
}

/* Style for the cards displaying results */
.shadow {
    border-radius: 10px;
    background-color: #fff;
    box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
}

.text-info {
    font-weight: bold;
}

.row-cols-lg-3 .col {
    margin-bottom: 20px;
}

.row-cols-lg-3 img {
    border-radius: 8px;
}

h5.mt-4 {
    font-size: 1.1rem;
}

/* Responsive behavior */
@media (max-width: 768px) {
    .container.mt-4 {
        margin-top: 10px;
    }

    .btn-outline-success {
        width: 100%;
    }
}

  </style>

</head>

<body>
    {%include 'header.html'%}

    <div class="container mt-5">
        <form method="get" action="{% url 'search' %}" class="d-flex">
          <!-- Search Type Dropdown -->
          <select class="form-select me-2" name="search_type">
            <option value="users" {% if search_type == 'users' %}selected{% endif %}>Search Users</option>
            <option value="posts" {% if search_type == 'posts' %}selected{% endif %}>Search Posts</option>
          </select>
      
          <!-- Search Input -->
          <input
            class="form-control me-2"
            type="search"
            placeholder="Search..."
            aria-label="Search"
            name="query"
            value="{{ query }}"
          >
          <button class="btn btn-outline-success" type="submit">Search</button>
        </form>
      </div>
      
      <div class="container mt-4">
        {% if search_results %}
          <h5>Search Results for "{{ query }}":</h5>
      
          {% if search_type == 'users' %}
            <div class="row row-cols-lg-3 row-cols-md-2 row-cols-1">
              {% for user in search_results %}
              <div class="col col-lg-4 col-md-6 col-12 mb-2">
                <div class="px-3 py-5 shadow">
                  <h5 class="mt-4">{{ user.username }}</h5>
                  <p>Email: {{ user.email }}</p>
                  <p>Full Name: {{ user.first_name }} {{ user.last_name }}</p>
                  <a href="{% url 'profile' user.id %}" class="btn btn-primary mt-3">View Profile</a>
                </div>
              </div>
              {% endfor %}
            </div>
      
          {% elif search_type == 'posts' %}
            <div class="row row-cols-lg-3 row-cols-md-2 row-cols-1">
              {% for post in search_results %}
              <div class="col col-lg-4 col-md-6 col-12 mb-2">
                <img src="{{media_url}}{{ post.image }}" class="img-fluid" alt="" width="100%">
                <div class="px-3 py-5 shadow">
                  <span class="text-white bg-info text-center rounded-3 mt-5" style="padding: 8px; font-size:25px;">{{ post.category }}</span>
                  <a href="{% url 'post' post.id %}" class="text-decoration-none text-dark">
                    <h5 class="mt-4">{{ post.postname }}</h5>
                  </a>
                  <p>{{ post.content|slice:"0:100" }}...</p>
                  <p class="small text-primary">{{ post.time }}</p>
                </div>
              </div>
              {% endfor %}
            </div>
          {% endif %}
      
        {% else %}
          {% if query %}
            <p>No results found for "{{ query }}"</p>
          {% endif %}
        {% endif %}
      </div>
        

  <!-- Bootstrap core JavaScript -->
  <script src="{% static 'vendor/jquery/jquery.min.js' %}"></script>
  <script src="{% static 'vendor/bootstrap/js/bootstrap.bundle.min.js' %}"></script>
  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js"
    integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r"
    crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.1/dist/js/bootstrap.min.js"
    integrity="sha384-Rx+T1VzGupg4BHQYs2gCW9It+akI2MM/mndMCy36UVfodzcJcF0GGLxZIzObiEfa"
    crossorigin="anonymous"></script>

  <!-- Additional Scripts -->
  <script src="{% static 'assets/js/custom.js' %}"></script>
  <script src="{% static 'assets/js/owl.js' %}"></script>
  <script src="{% static 'assets/js/slick.js' %}"></script>
  <script src="{% static 'assets/js/isotope.js' %}"></script>
  <script src="{% static 'assets/js/accordions.js' %}"></script>


  <script language="text/Javascript">
    cleared[0] = cleared[1] = cleared[2] = 0; //set a cleared flag for each field
    function clearField(t) {                   //declaring the array outside of the
      if (!cleared[t.id]) {                      // function makes it static and global
        cleared[t.id] = 1;  // you could use true and false, but that's more typing
        t.value = '';         // with more chance of typos
        t.style.color = '#fff';
      }
    }

  </script>

</body>

</html>